
The first idea is to use dfs.   

 