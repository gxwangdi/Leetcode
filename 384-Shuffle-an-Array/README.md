
Naive solution would be,  to get all permutations from the input, and shuffle for the whole collection.   

Prepare something for the original array.   
================================================